<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Professional ATS Resume Analyzer</title>
    <style>
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }
        
        body {
            font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            min-height: 100vh;
            color: #333;
        }
        
        .container {
            max-width: 1400px;
            margin: 0 auto;
            padding: 20px;
        }
        
        .header {
            text-align: center;
            color: white;
            margin-bottom: 30px;
        }
        
        .header h1 {
            font-size: 2.5rem;
            margin-bottom: 10px;
            text-shadow: 2px 2px 4px rgba(0,0,0,0.3);
        }
        
        .header p {
            font-size: 1.1rem;
            opacity: 0.9;
        }
        
        .main-content {
            display: grid;
            grid-template-columns: 1fr 1fr;
            gap: 30px;
            margin-bottom: 30px;
        }
        
        .input-section, .results-section {
            background: white;
            border-radius: 15px;
            padding: 25px;
            box-shadow: 0 10px 30px rgba(0,0,0,0.1);
        }
        
        .section-title {
            font-size: 1.5rem;
            margin-bottom: 20px;
            color: #333;
            border-bottom: 3px solid #667eea;
            padding-bottom: 10px;
        }
        
        .input-group {
            margin-bottom: 20px;
        }
        
        .input-group label {
            display: block;
            font-weight: bold;
            margin-bottom: 8px;
            color: #555;
        }
        
        .input-group textarea {
            width: 100%;
            min-height: 150px;
            border: 2px solid #e1e5e9;
            border-radius: 10px;
            padding: 15px;
            font-size: 14px;
            resize: vertical;
            transition: border-color 0.3s;
            font-family: 'Consolas', monospace;
        }
        
        .input-group textarea:focus {
            border-color: #667eea;
            outline: none;
            box-shadow: 0 0 10px rgba(102, 126, 234, 0.3);
        }
        
        .analyze-btn {
            width: 100%;
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            color: white;
            border: none;
            padding: 15px;
            border-radius: 10px;
            font-size: 16px;
            font-weight: bold;
            cursor: pointer;
            transition: all 0.3s;
        }
        
        .analyze-btn:hover {
            transform: translateY(-2px);
            box-shadow: 0 5px 15px rgba(0,0,0,0.2);
        }
        
        .analyze-btn:disabled {
            opacity: 0.6;
            cursor: not-allowed;
            transform: none;
        }
        
        .score-circle {
            width: 150px;
            height: 150px;
            margin: 0 auto 20px;
            position: relative;
        }
        
        .circle-progress {
            width: 150px;
            height: 150px;
            border-radius: 50%;
            background: conic-gradient(#4CAF50 0deg, #4CAF50 0deg, #e0e0e0 0deg);
            display: flex;
            align-items: center;
            justify-content: center;
            position: relative;
            transition: all 0.5s ease;
        }
        
        .circle-progress::before {
            content: '';
            width: 120px;
            height: 120px;
            background: white;
            border-radius: 50%;
            position: absolute;
        }
        
        .score-text {
            position: relative;
            z-index: 1;
            font-size: 24px;
            font-weight: bold;
            color: #333;
        }
        
        .tabs {
            margin-top: 20px;
        }
        
        .tab-buttons {
            display: flex;
            flex-wrap: wrap;
            gap: 5px;
            margin-bottom: 15px;
        }
        
        .tab-btn {
            padding: 10px 15px;
            background: #f5f5f5;
            border: none;
            border-radius: 8px;
            cursor: pointer;
            font-size: 13px;
            font-weight: 500;
            transition: all 0.3s;
        }
        
        .tab-btn.active {
            background: #667eea;
            color: white;
            transform: translateY(-1px);
        }
        
        .tab-btn:hover {
            background: #5a6fd8;
            color: white;
        }
        
        .tab-content {
            display: none;
            background: #f9f9f9;
            padding: 20px;
            border-radius: 10px;
            max-height: 400px;
            overflow-y: auto;
            line-height: 1.6;
        }
        
        .tab-content.active {
            display: block;
        }
        
        .skill-item {
            display: inline-block;
            background: #e3f2fd;
            color: #1976d2;
            padding: 5px 10px;
            margin: 3px;
            border-radius: 15px;
            font-size: 12px;
            font-weight: 500;
        }
        
        .skill-item.missing {
            background: #ffebee;
            color: #d32f2f;
        }
        
        .skill-item.found {
            background: #e8f5e8;
            color: #388e3c;
        }
        
        .progress-bars {
            margin-top: 20px;
        }
        
        .progress-item {
            margin-bottom: 15px;
        }
        
        .progress-label {
            display: flex;
            justify-content: space-between;
            margin-bottom: 5px;
            font-size: 14px;
            font-weight: 500;
        }
        
        .progress-bar {
            width: 100%;
            height: 8px;
            background: #e0e0e0;
            border-radius: 4px;
            overflow: hidden;
        }
        
        .progress-fill {
            height: 100%;
            background: linear-gradient(90deg, #4CAF50, #81C784);
            transition: width 0.5s ease;
            width: 0;
        }
        
        .tips-list {
            list-style: none;
        }
        
        .tips-list li {
            background: #fff3cd;
            margin: 8px 0;
            padding: 12px;
            border-radius: 8px;
            border-left: 4px solid #ffc107;
        }
        
        .keyword-stats {
            display: grid;
            grid-template-columns: 1fr 1fr 1fr;
            gap: 15px;
            margin: 15px 0;
        }
        
        .stat-card {
            background: #f8f9fa;
            padding: 15px;
            border-radius: 8px;
            text-align: center;
            transition: transform 0.2s;
        }
        
        .stat-card:hover {
            transform: translateY(-2px);
        }
        
        .stat-number {
            font-size: 24px;
            font-weight: bold;
            color: #667eea;
        }
        
        .stat-label {
            font-size: 12px;
            color: #666;
            margin-top: 5px;
        }

        .alert-box {
            padding: 15px;
            border-radius: 8px;
            margin: 15px 0;
            border-left: 4px solid;
        }

        .alert-success {
            background: #d4edda;
            border-color: #28a745;
            color: #155724;
        }

        .alert-warning {
            background: #fff3cd;
            border-color: #ffc107;
            color: #856404;
        }

        .alert-danger {
            background: #f8d7da;
            border-color: #dc3545;
            color: #721c24;
        }

        @media (max-width: 768px) {
            .main-content {
                grid-template-columns: 1fr;
            }
            
            .header h1 {
                font-size: 2rem;
            }

            .keyword-stats {
                grid-template-columns: 1fr;
                gap: 10px;
            }
        }
    </style>
</head>
<body>
    <div class="container">
        <div class="header">
            <h1>üéØ Professional ATS Resume Analyzer</h1>
            <p>Advanced AI-powered resume analysis for multiple industries</p>
        </div>
        
        <div class="main-content">
            <div class="input-section">
                <h2 class="section-title">üìù Input Data</h2>
                
                <div class="input-group">
                    <label for="jobDescription">Job Description</label>
                    <textarea id="jobDescription" placeholder="Paste the complete job description here..."></textarea>
                </div>
                
                <div class="input-group">
                    <label for="cvText">Your Resume/CV Text</label>
                    <textarea id="cvText" placeholder="Paste your resume text here..."></textarea>
                </div>
                
                <button class="analyze-btn" onclick="analyzeCV()">
                    <span id="btnText">üîç Analyze Resume</span>
                </button>
            </div>
            
            <div class="results-section">
                <h2 class="section-title">üìä Analysis Results</h2>
                
                <div class="score-circle">
                    <div class="circle-progress" id="scoreCircle">
                        <div class="score-text" id="scoreText">0%</div>
                    </div>
                </div>
                
                <div class="keyword-stats">
                    <div class="stat-card">
                        <div class="stat-number" id="foundKeywords">0</div>
                        <div class="stat-label">Keywords Found</div>
                    </div>
                    <div class="stat-card">
                        <div class="stat-number" id="missingKeywords">0</div>
                        <div class="stat-label">Keywords Missing</div>
                    </div>
                    <div class="stat-card">
                        <div class="stat-number" id="matchPercentage">0%</div>
                        <div class="stat-label">Match Rate</div>
                    </div>
                </div>
                
                <div class="progress-bars">
                    <div class="progress-item">
                        <div class="progress-label">
                            <span>Hard Skills</span>
                            <span id="hardSkillsPercent">0%</span>
                        </div>
                        <div class="progress-bar">
                            <div class="progress-fill" id="hardSkillsProgress"></div>
                        </div>
                    </div>
                    
                    <div class="progress-item">
                        <div class="progress-label">
                            <span>Soft Skills</span>
                            <span id="softSkillsPercent">0%</span>
                        </div>
                        <div class="progress-bar">
                            <div class="progress-fill" id="softSkillsProgress"></div>
                        </div>
                    </div>
                    
                    <div class="progress-item">
                        <div class="progress-label">
                            <span>Keywords Match</span>
                            <span id="keywordsPercent">0%</span>
                        </div>
                        <div class="progress-bar">
                            <div class="progress-fill" id="keywordsProgress"></div>
                        </div>
                    </div>
                </div>
                
                <div class="tabs">
                    <div class="tab-buttons">
                        <button class="tab-btn active" onclick="showTab('summary')">Summary</button>
                        <button class="tab-btn" onclick="showTab('hardSkills')">Hard Skills</button>
                        <button class="tab-btn" onclick="showTab('softSkills')">Soft Skills</button>
                        <button class="tab-btn" onclick="showTab('keywords')">Keywords</button>
                        <button class="tab-btn" onclick="showTab('tips')">Improvement Tips</button>
                    </div>
                    
                    <div id="summary" class="tab-content active">
                        <h3>üìã Analysis Summary</h3>
                        <p>Upload your resume and job description to see detailed analysis results</p>
                    </div>
                    
                    <div id="hardSkills" class="tab-content">
                        <h3>üíª Technical Skills Analysis</h3>
                        <div id="hardSkillsContent"></div>
                    </div>
                    
                    <div id="softSkills" class="tab-content">
                        <h3>ü§ù Soft Skills Analysis</h3>
                        <div id="softSkillsContent"></div>
                    </div>
                    
                    <div id="keywords" class="tab-content">
                        <h3>üîë Keywords Analysis</h3>
                        <div id="keywordsContent"></div>
                    </div>
                    
                    <div id="tips" class="tab-content">
                        <h3>üí° Improvement Recommendations</h3>
                        <ul id="tipsList" class="tips-list"></ul>
                    </div>
                </div>
            </div>
        </div>
    </div>

    <script>
        // Comprehensive Hard Skills Database - Multi-Industry
        const HARD_SKILLS = [
            // Data Science & Analytics
            'data analysis', 'data analytics', 'data science', 'big data', 'data mining', 'data modeling',
            'statistical analysis', 'predictive analytics', 'machine learning', 'deep learning', 'ai', 'artificial intelligence',
            'python', 'r programming', 'sql', 'mysql', 'postgresql', 'mongodb', 'nosql', 'hadoop', 'spark', 'kafka',
            'tableau', 'power bi', 'qlik', 'looker', 'google analytics', 'adobe analytics', 'matplotlib', 'seaborn',
            'pandas', 'numpy', 'scikit-learn', 'tensorflow', 'pytorch', 'keras', 'jupyter', 'rstudio',
            
            // Business Intelligence & Reporting
            'business intelligence', 'bi', 'reporting', 'dashboard', 'kpi analysis', 'metrics', 'performance analysis',
            'data visualization', 'business analytics', 'operational reporting', 'financial reporting', 'executive reporting',
            'etl', 'data warehousing', 'data pipeline', 'data integration', 'olap', 'data governance',
            
            // Microsoft Office & Productivity
            'excel', 'advanced excel', 'pivot tables', 'vlookup', 'hlookup', 'macros', 'vba', 'power query', 'power pivot',
            'microsoft office', 'word', 'powerpoint', 'outlook', 'access', 'project', 'visio', 'sharepoint', 'teams',
            'google workspace', 'google sheets', 'google slides', 'google docs', 'google drive',
            
            // Sales & CRM
            'salesforce', 'hubspot', 'pipedrive', 'zoho crm', 'microsoft dynamics', 'crm', 'lead generation',
            'sales analytics', 'sales forecasting', 'pipeline management', 'territory management', 'account management',
            'customer acquisition', 'customer retention', 'sales automation', 'sales enablement', 'quota management',
            
            // Marketing & Digital Marketing
            'digital marketing', 'seo', 'sem', 'ppc', 'google ads', 'facebook ads', 'linkedin ads', 'social media marketing',
            'content marketing', 'email marketing', 'marketing automation', 'lead nurturing', 'conversion optimization',
            'google tag manager', 'google search console', 'facebook business manager', 'hootsuite', 'buffer',
            'mailchimp', 'hubspot marketing', 'marketo', 'pardot', 'campaign management', 'brand management',
            'market research', 'competitive analysis', 'customer segmentation', 'marketing analytics', 'roi analysis',
            
            // Finance & Accounting
            'financial analysis', 'financial modeling', 'budgeting', 'forecasting', 'variance analysis', 'cost analysis',
            'profitability analysis', 'cash flow analysis', 'investment analysis', 'valuation', 'risk assessment',
            'quickbooks', 'sage', 'xero', 'sap', 'oracle financials', 'peachtree', 'netsuite', 'great plains',
            'gaap', 'ifrs', 'sox compliance', 'audit', 'tax preparation', 'payroll', 'accounts payable', 'accounts receivable',
            
            // Human Resources & Talent Management
            'talent acquisition', 'recruitment', 'applicant tracking system', 'ats', 'workday', 'successfactors',
            'performance management', 'employee engagement', 'compensation analysis', 'benefits administration',
            'hr analytics', 'workforce planning', 'onboarding', 'training development', 'compliance management',
            'hris', 'payroll processing', 'employee relations', 'organizational development', 'change management',
            
            // Project Management
            'project management', 'pmp', 'agile', 'scrum', 'kanban', 'waterfall', 'prince2', 'six sigma', 'lean',
            'jira', 'confluence', 'asana', 'trello', 'monday.com', 'notion', 'slack', 'microsoft project',
            'risk management', 'stakeholder management', 'budget management', 'resource planning', 'timeline management',
            
            // Operations & Supply Chain
            'operations management', 'supply chain management', 'logistics', 'inventory management', 'procurement',
            'vendor management', 'contract management', 'process improvement', 'lean six sigma', 'kaizen',
            'quality assurance', 'quality control', 'iso standards', 'continuous improvement', 'workflow optimization',
            'erp systems', 'warehouse management', 'distribution', 'transportation', 'demand planning',
            
            // IT & Technical
            'javascript', 'html', 'css', 'java', 'c++', 'php', 'node.js', 'react', 'angular', 'vue.js',
            'aws', 'azure', 'google cloud', 'docker', 'kubernetes', 'git', 'github', 'jenkins', 'devops',
            'cybersecurity', 'network security', 'data security', 'cloud computing', 'database administration',
            'system administration', 'technical support', 'it infrastructure', 'software development',
            
            // Industry-Specific Tools
            'bloomberg terminal', 'reuters', 'factset', 'morningstar', 'capital iq', 'pitchbook', 'crunchbase',
            'adobe creative suite', 'photoshop', 'illustrator', 'indesign', 'premiere pro', 'after effects',
            'autocad', 'solidworks', 'matlab', 'stata', 'spss', 'sas', 'minitab', 'alteryx', 'knime',
            
            // E-commerce & Retail
            'shopify', 'magento', 'woocommerce', 'amazon seller central', 'ebay', 'etsy', 'inventory planning',
            'merchandise planning', 'category management', 'pricing strategy', 'promotional planning',
            'retail analytics', 'pos systems', 'omnichannel', 'customer experience', 'loyalty programs'
        ];

        // Comprehensive Soft Skills Database
        const SOFT_SKILLS = [
            // Leadership & Management
            'leadership', 'team leadership', 'people management', 'staff management', 'team management',
            'cross-functional leadership', 'change leadership', 'strategic leadership', 'operational leadership',
            'performance management', 'talent development', 'succession planning', 'coaching', 'mentoring',
            
            // Communication & Interpersonal
            'communication', 'verbal communication', 'written communication', 'presentation skills',
            'public speaking', 'interpersonal skills', 'client communication', 'stakeholder communication',
            'executive communication', 'cross-cultural communication', 'negotiation', 'active listening',
            'conflict resolution', 'diplomatic communication', 'persuasion', 'influencing',
            
            // Analytical & Problem Solving
            'analytical thinking', 'critical thinking', 'problem solving', 'strategic thinking',
            'decision making', 'creative thinking', 'innovative thinking', 'logical reasoning',
            'attention to detail', 'detail oriented', 'quality focused', 'accuracy', 'precision',
            
            // Business & Commercial Skills
            'business acumen', 'commercial awareness', 'market knowledge', 'industry knowledge',
            'customer focus', 'client focus', 'customer service', 'relationship building',
            'account management', 'business development', 'sales skills', 'networking',
            'partnership development', 'vendor relations', 'supplier management',
            
            // Project & Process Management
            'project coordination', 'process management', 'workflow management', 'task management',
            'priority management', 'time management', 'deadline management', 'resource management',
            'multi-tasking', 'organizational skills', 'planning', 'scheduling', 'coordination',
            
            // Collaboration & Teamwork
            'teamwork', 'collaboration', 'team player', 'cross-functional collaboration',
            'matrix management', 'consensus building', 'facilitation', 'meeting facilitation',
            'workshop facilitation', 'group dynamics', 'team building', 'cooperation',
            
            // Adaptability & Innovation
            'adaptability', 'flexibility', 'agility', 'change management', 'resilience',
            'learning agility', 'continuous learning', 'innovation', 'creativity',
            'entrepreneurial mindset', 'initiative', 'proactive', 'self-motivation',
            'self-starter', 'independent worker', 'autonomous', 'resourcefulness',
            
            // Professional Skills
            'professionalism', 'integrity', 'ethics', 'reliability', 'accountability', 'responsibility',
            'work ethic', 'dedication', 'commitment', 'punctuality', 'confidentiality',
            'trustworthiness', 'dependability', 'consistency', 'cultural sensitivity',
            
            // Customer & Client Relations
            'customer relationship management', 'client relationship management', 'customer satisfaction',
            'customer experience', 'service excellence', 'client retention', 'customer loyalty',
            'complaint resolution', 'client onboarding', 'relationship maintenance',
            
            // Training & Development
            'training', 'teaching', 'knowledge transfer', 'skill development', 'capacity building',
            'employee development', 'performance coaching', 'feedback delivery', 'curriculum development',
            'learning facilitation', 'knowledge management', 'documentation', 'process documentation',
            
            // Sales & Business Development
            'sales management', 'business development', 'lead qualification', 'objection handling',
            'closing skills', 'prospecting', 'cold calling', 'relationship selling', 'consultative selling',
            'territory development', 'market penetration', 'competitive positioning',
            
            // Financial & Business Analysis
            'financial acumen', 'budget management', 'cost consciousness', 'roi analysis',
            'business case development', 'financial planning', 'investment analysis', 'risk assessment',
            'performance measurement', 'benchmarking', 'trend analysis'
        ];

        const STOPWORDS = new Set([
            'the', 'and', 'or', 'but', 'in', 'on', 'at', 'to', 'for', 'of', 'with', 'by',
            'from', 'as', 'is', 'are', 'was', 'were', 'be', 'been', 'being', 'have', 'has',
            'had', 'do', 'does', 'did', 'will', 'would', 'could', 'should', 'may', 'might',
            'must', 'can', 'shall', 'this', 'that', 'these', 'those', 'i', 'you', 'he',
            'she', 'it', 'we', 'they', 'me', 'him', 'her', 'us', 'them', 'my', 'your',
            'his', 'her', 'its', 'our', 'their', 'a', 'an', 'using', 'use', 'used',
            'including', 'include', 'includes', 'such', 'other', 'also', 'through'
        ]);

        // Enhanced text normalization
        function normalizeText(text) {
            return text.toLowerCase()
                      .replace(/[^\w\s]/g, ' ')
                      .replace(/\s+/g, ' ')
                      .trim();
        }

        // Advanced keyword extraction
        function extractKeywords(text) {
            const normalized = normalizeText(text);
            const words = normalized.split(' ').filter(word => 
                word.length > 2 && !STOPWORDS.has(word)
            );
            
            // Extract multi-word phrases (2-4 words)
            const phrases = [];
            for (let i = 0; i < words.length - 1; i++) {
                // Two-word phrases
                const twoWordPhrase = words[i] + ' ' + words[i + 1];
                if (twoWordPhrase.length > 6) {
                    phrases.push(twoWordPhrase);
                }
                
                // Three-word phrases
                if (i < words.length - 2) {
                    const threeWordPhrase = words[i] + ' ' + words[i + 1] + ' ' + words[i + 2];
                    if (threeWordPhrase.length > 10) {
                        phrases.push(threeWordPhrase);
                    }
                }
                
                // Four-word phrases
                if (i < words.length - 3) {
                    const fourWordPhrase = words[i] + ' ' + words[i + 1] + ' ' + words[i + 2] + ' ' + words[i + 3];
                    if (fourWordPhrase.length > 15) {
                        phrases.push(fourWordPhrase);
                    }
                }
            }
            
            return [...new Set([...words, ...phrases])];
        }

        // Enhanced fuzzy matching
        function fuzzyMatch(word1, word2, threshold = 0.8) {
            const maxLen = Math.max(word1.length, word2.length);
            const distance = levenshteinDistance(word1, word2);
            return (maxLen - distance) / maxLen >= threshold;
        }

        function levenshteinDistance(str1, str2) {
            const matrix = [];
            for (let i = 0; i <= str2.length; i++) {
                matrix[i] = [i];
            }
            for (let j = 0; j <= str1.length; j++) {
                matrix[0][j] = j;
            }
            for (let i = 1; i <= str2.length; i++) {
                for (let j = 1; j <= str1.length; j++) {
                    if (str2.charAt(i - 1) === str1.charAt(j - 1)) {
                        matrix[i][j] = matrix[i - 1][j - 1];
                    } else {
                        matrix[i][j] = Math.min(
                            matrix[i - 1][j - 1] + 1,
                            matrix[i][j - 1] + 1,
                            matrix[i - 1][j] + 1
                        );
                    }
                }
            }
            return matrix[str2.length][str1.length];
        }

        // Comprehensive semantic similarity mapping
        function semanticSimilarity(word1, word2) {
            const synonyms = {
                // Data & Analytics
                'data analysis': ['data analytics', 'analytics', 'statistical analysis', 'data science'],
                'business intelligence': ['bi', 'business analytics', 'data intelligence', 'enterprise intelligence'],
                'machine learning': ['ml', 'artificial intelligence', 'ai', 'predictive modeling'],
                'data visualization': ['charts', 'graphs', 'dashboards', 'reporting'],
                
                // Business Operations
                'management operations': ['operations management', 'operational management', 'business operations'],
                'performance management': ['performance evaluation', 'performance assessment', 'performance review'],
                'project management': ['pm', 'project coordination', 'program management'],
                'risk management': ['risk analysis', 'risk assessment', 'risk mitigation'],
                
                // Sales & Marketing
                'sales': ['revenue', 'business development', 'account management', 'client acquisition'],
                'marketing': ['brand management', 'digital marketing', 'campaign management', 'promotion'],
                'customer service': ['client service', 'customer support', 'customer experience'],
                'crm': ['customer relationship management', 'salesforce', 'client management'],
                
                // Finance & Accounting
                'financial analysis': ['finance', 'financial modeling', 'financial planning', 'budgeting'],
                'accounting': ['bookkeeping', 'financial reporting', 'accounts payable', 'accounts receivable'],
                'budgeting': ['budget planning', 'financial planning', 'cost management'],
                
                // Technology
                'excel': ['microsoft excel', 'spreadsheet', 'pivot tables', 'vlookup'],
                'sql': ['database', 'mysql', 'postgresql', 'data querying'],
                'python': ['python programming', 'py', 'scripting'],
                'javascript': ['js', 'web development', 'frontend'],
                
                // Communication & Leadership
                'leadership': ['team leadership', 'management', 'supervision', 'people management'],
                'communication': ['verbal communication', 'presentation skills', 'interpersonal skills'],
                'teamwork': ['collaboration', 'team player', 'cross-functional collaboration'],
                'problem solving': ['troubleshooting', 'analytical thinking', 'critical thinking'],
                
                // HR & Talent Management
                'human resources': ['hr', 'talent management', 'people operations', 'employee relations'],
                'recruitment': ['talent acquisition', 'hiring', 'sourcing', 'recruiting'],
                'training': ['learning and development', 'employee development', 'coaching'],
                
                // Operations & Supply Chain
                'supply chain': ['logistics', 'procurement', 'vendor management', 'sourcing'],
                'operations': ['operational excellence', 'process improvement', 'efficiency'],
                'quality assurance': ['qa', 'quality control', 'testing', 'compliance']
            };
            
            const word1Lower = normalizeText(word1);
            const word2Lower = normalizeText(word2);
            
            if (word1Lower === word2Lower) return true;
            
            for (const [key, values] of Object.entries(synonyms)) {
                const normalizedKey = normalizeText(key);
                if ((normalizedKey === word1Lower && values.some(v => normalizeText(v) === word2Lower)) ||
                    (normalizedKey === word2Lower && values.some(v => normalizeText(v) === word1Lower)) ||
                    (values.some(v => normalizeText(v) === word1Lower) && values.some(v => normalizeText(v) === word2Lower))) {
                    return true;
                }
            }
            
            return false;
        }

        // Advanced resume analysis function
        function analyzeCV() {
            const jobDesc = document.getElementById('jobDescription').value.trim();
            const cvText = document.getElementById('cvText').value.trim();
            
            if (!jobDesc || !cvText) {
                alert('Please provide both job description and resume text');
                return;
            }

            if (jobDesc.length < 100) {
                alert('Job description is too short. Please provide at least 100 characters.');
                return;
            }
            
            if (cvText.length < 200) {
                alert('Resume text is too short. Please provide at least 200 characters.');
                return;
            }

            const btn = document.querySelector('.analyze-btn');
            const btnText = document.getElementById('btnText');
            btn.disabled = true;
            btnText.textContent = '‚è≥ Analyzing Resume...';

            setTimeout(() => {
                const result = performAdvancedAnalysis(jobDesc, cvText);
                displayResults(result);
                
                btn.disabled = false;
                btnText.textContent = 'üîç Analyze Resume';
            }, 2000);
        }

        function performAdvancedAnalysis(jobDesc, cvText) {
            // Extract critical keywords from job description
            const criticalKeywords = extractCriticalKeywords(jobDesc);
            const jdHardSkills = extractJobRequiredSkills(jobDesc, HARD_SKILLS);
            const jdSoftSkills = extractJobRequiredSkills(jobDesc, SOFT_SKILLS);
            
            // Analyze resume against job requirements
            const cvAnalysis = analyzeResumeAgainstJob(cvText, criticalKeywords, jdHardSkills, jdSoftSkills);
            
            // Calculate scores using professional ATS algorithms
            const scores = calculateProfessionalScores(cvAnalysis, criticalKeywords.length, jdHardSkills.length, jdSoftSkills.length);
            
            // Identify critical issues
            const criticalIssues = identifyIssues(jobDesc, cvText, cvAnalysis);
            
            return {
                overallScore: scores.overall,
                hardSkillsPercent: scores.hardSkills,
                softSkillsPercent: scores.softSkills,
                keywordsPercent: scores.keywords,
                foundKeywords: cvAnalysis.foundKeywords.length,
                missingKeywords: cvAnalysis.missingKeywords.length,
                hardSkillsFound: cvAnalysis.hardSkillsFound,
                hardSkillsMissing: cvAnalysis.hardSkillsMissing,
                softSkillsFound: cvAnalysis.softSkillsFound,
                softSkillsMissing: cvAnalysis.softSkillsMissing,
                keywordMatches: cvAnalysis.foundKeywords,
                keywordsMissing: cvAnalysis.missingKeywords,
                criticalIssues: criticalIssues,
                qualityScore: cvAnalysis.qualityScore
            };
        }

        function extractCriticalKeywords(jobDesc) {
            const text = normalizeText(jobDesc);
            const sentences = jobDesc.split(/[.!?]+/);
            const criticalKeywords = new Set();
            
            // Importance indicators
            const importanceIndicators = [
                'required', 'must have', 'essential', 'mandatory', 'necessary',
                'minimum', 'at least', 'experience in', 'proficient in', 
                'expert in', 'advanced', 'strong', 'excellent', 'proven',
                'demonstrated', 'solid', 'extensive', 'deep', 'comprehensive'
            ];
            
            sentences.forEach(sentence => {
                const normalizedSentence = normalizeText(sentence);
                
                if (importanceIndicators.some(indicator => normalizedSentence.includes(indicator))) {
                    const words = extractKeywords(sentence);
                    words.forEach(word => {
                        if (word.length > 3) {
                            criticalKeywords.add(word);
                        }
                    });
                }
            });
            
            // Add frequently mentioned keywords
            const allWords = extractKeywords(jobDesc);
            const wordCount = {};
            allWords.forEach(word => {
                wordCount[word] = (wordCount[word] || 0) + 1;
            });
            
            Object.entries(wordCount).forEach(([word, count]) => {
                if (count >= 2 && word.length > 3) {
                    criticalKeywords.add(word);
                }
            });
            
            return Array.from(criticalKeywords).slice(0, 40);
        }

        function extractJobRequiredSkills(jobDesc, skillsList) {
            const requiredSkills = [];
            const text = normalizeText(jobDesc);
            
            skillsList.forEach(skill => {
                const normalizedSkill = normalizeText(skill);
                
                if (text.includes(normalizedSkill)) {
                    requiredSkills.push(skill);
                } else {
                    const words = text.split(' ');
                    if (words.some(word => fuzzyMatch(word, normalizedSkill, 0.90)) || 
                        semanticSimilarity(skill, text)) {
                        requiredSkills.push(skill);
                    }
                }
            });
            
            return requiredSkills.slice(0, 20);
        }

        function analyzeResumeAgainstJob(cvText, criticalKeywords, requiredHardSkills, requiredSoftSkills) {
            const cvNormalized = normalizeText(cvText);
            const cvWords = extractKeywords(cvText);
            
            // Analyze critical keywords
            const foundKeywords = [];
            const missingKeywords = [];
            
            criticalKeywords.forEach(keyword => {
                let found = false;
                
                if (cvNormalized.includes(normalizeText(keyword))) {
                    found = true;
                } else if (cvWords.some(word => fuzzyMatch(word, normalizeText(keyword), 0.92))) {
                    found = true;
                }
                
                if (found) {
                    foundKeywords.push(keyword);
                } else {
                    missingKeywords.push(keyword);
                }
            });
            
            // Analyze hard skills
            const hardSkillsFound = [];
            const hardSkillsMissing = [];
            
            requiredHardSkills.forEach(skill => {
                const normalizedSkill = normalizeText(skill);
                let found = false;
                
                if (cvNormalized.includes(normalizedSkill)) {
                    found = true;
                } else if (cvWords.some(word => fuzzyMatch(word, normalizedSkill, 0.85)) ||
                          semanticSimilarity(skill, cvText)) {
                    found = true;
                }
                
                if (found) {
                    hardSkillsFound.push(skill);
                } else {
                    hardSkillsMissing.push(skill);
                }
            });
            
            // Analyze soft skills
            const softSkillsFound = [];
            const softSkillsMissing = [];
            
            requiredSoftSkills.forEach(skill => {
                const normalizedSkill = normalizeText(skill);
                
                if (cvNormalized.includes(normalizedSkill) || 
                    semanticSimilarity(skill, cvText)) {
                    softSkillsFound.push(skill);
                } else {
                    softSkillsMissing.push(skill);
                }
            });
            
            const qualityScore = evaluateResumeQuality(cvText);
            
            return {
                foundKeywords,
                missingKeywords,
                hardSkillsFound,
                hardSkillsMissing,
                softSkillsFound,
                softSkillsMissing,
                qualityScore
            };
        }

        function calculateProfessionalScores(cvAnalysis, totalKeywords, totalHardSkills, totalSoftSkills) {
            let keywordsPercent = 0;
            if (totalKeywords > 0) {
                keywordsPercent = Math.round((cvAnalysis.foundKeywords.length / totalKeywords) * 100);
            }
            
            let hardSkillsPercent = 0;
            if (totalHardSkills > 0) {
                hardSkillsPercent = Math.round((cvAnalysis.hardSkillsFound.length / totalHardSkills) * 100);
            } else {
                hardSkillsPercent = 100;
            }
            
            let softSkillsPercent = 0;
            if (totalSoftSkills > 0) {
                softSkillsPercent = Math.round((cvAnalysis.softSkillsFound.length / totalSoftSkills) * 100);
            } else {
                softSkillsPercent = 100;
            }
            
            // Professional ATS scoring algorithm
            let overall = Math.round(
                (keywordsPercent * 0.45) +     // Keywords have highest weight
                (hardSkillsPercent * 0.35) +   // Technical skills important
                (softSkillsPercent * 0.15) +   // Soft skills moderate importance
                (cvAnalysis.qualityScore * 0.05)  // Resume quality minor factor
            );
            
            // Apply penalties for poor performance
            if (cvAnalysis.foundKeywords.length === 0) overall = Math.min(overall, 15);
            if (cvAnalysis.hardSkillsFound.length === 0 && totalHardSkills > 0) overall = Math.min(overall, 25);
            if (overall > 90) overall = overall - Math.floor(Math.random() * 5) - 3; // Realistic cap
            
            return {
                overall: Math.max(0, Math.min(100, overall)),
                keywords: keywordsPercent,
                hardSkills: hardSkillsPercent,
                softSkills: softSkillsPercent
            };
        }

        function evaluateResumeQuality(cvText) {
            let score = 0;
            const wordCount = cvText.trim().split(/\s+/).length;
            
            // Word count evaluation
            if (wordCount >= 300 && wordCount <= 600) {
                score += 25;
            } else if (wordCount >= 200 && wordCount < 800) {
                score += 15;
            } else {
                score -= 5;
            }
            
            // Quantifiable results
            const numbersPattern = /\d+(%|percent|years?|months?|\+|increase|decrease|improve|reduce|save|grow|million|thousand|k\b|\$)/gi;
            const numbersCount = (cvText.match(numbersPattern) || []).length;
            if (numbersCount >= 3) {
                score += 30;
            } else if (numbersCount >= 1) {
                score += 20;
            }
            
            // Action verbs
            const strongVerbs = [
                'achieved', 'accomplished', 'delivered', 'exceeded', 'improved', 
                'increased', 'reduced', 'managed', 'led', 'created', 'developed',
                'implemented', 'optimized', 'streamlined', 'generated', 'built',
                'launched', 'designed', 'coordinated', 'supervised'
            ];
            const verbsFound = strongVerbs.filter(verb => 
                cvText.toLowerCase().includes(verb)
            ).length;
            
            if (verbsFound >= 5) {
                score += 25;
            } else if (verbsFound >= 2) {
                score += 15;
            }
            
            // Resume sections
            const sections = ['experience', 'education', 'skills', 'summary', 'objective'];
            const sectionsFound = sections.filter(section => 
                cvText.toLowerCase().includes(section)
            ).length;
            
            if (sectionsFound >= 3) {
                score += 20;
            } else if (sectionsFound >= 2) {
                score += 10;
            }
            
            return Math.max(0, Math.min(100, score));
        }

        function identifyIssues(jobDesc, cvText, cvAnalysis) {
            const issues = [];
            
            if (cvAnalysis.foundKeywords.length === 0) {
                issues.push('‚ùå No critical keywords from job description found in resume');
            }
            
            if (cvAnalysis.hardSkillsFound.length === 0 && cvAnalysis.hardSkillsMissing.length > 0) {
                issues.push('‚ö†Ô∏è Missing all required technical skills');
            }
            
            const wordCount = cvText.trim().split(/\s+/).length;
            if (wordCount < 250) {
                issues.push('üìù Resume is too short - add more relevant details');
            }
            
            if (!/\d/.test(cvText)) {
                issues.push('üìä No quantifiable achievements or metrics found');
            }
            
            const weakPhrases = ['responsible for', 'duties include', 'helped with', 'worked on'];
            const weakPhrasesFound = weakPhrases.filter(phrase => 
                cvText.toLowerCase().includes(phrase)
            );
            if (weakPhrasesFound.length > 0) {
                issues.push(`üí™ Replace weak phrases: ${weakPhrasesFound.join(', ')}`);
            }
            
            return issues;
        }

        function generateTips(result) {
            const tips = [];
            
            // Score-based recommendations
            if (result.overallScore < 30) {
                tips.push('üö® Critical: Resume needs complete rewrite to match job requirements');
            } else if (result.overallScore < 50) {
                tips.push('‚ö†Ô∏è Major improvements needed to pass ATS systems');
            } else if (result.overallScore < 70) {
                tips.push('üìà Good foundation but needs optimization for better ATS compatibility');
            } else if (result.overallScore >= 85) {
                tips.push('üéâ Excellent! Resume is well-optimized for ATS systems');
            }
            
            // Critical issues
            if (result.criticalIssues && result.criticalIssues.length > 0) {
                tips.push('‚õî Critical issues to address:');
                result.criticalIssues.forEach(issue => tips.push(issue));
            }
            
            // Specific improvements
            if (result.hardSkillsPercent < 40) {
                tips.push('üíª Priority: Add more technical skills mentioned in job description');
                if (result.hardSkillsMissing && result.hardSkillsMissing.length > 0) {
                    tips.push(`üîß Focus on: ${result.hardSkillsMissing.slice(0, 3).join(', ')}`);
                }
            }
            
            if (result.keywordsPercent < 50) {
                tips.push('üîë Use more keywords from the job description throughout your resume');
                tips.push('üìù Mirror the exact terminology used in the job posting');
            }
            
            if (result.softSkillsPercent < 60 && result.softSkillsMissing && result.softSkillsMissing.length > 0) {
                tips.push(`ü§ù Demonstrate these soft skills: ${result.softSkillsMissing.slice(0, 2).join(', ')}`);
            }
            
            // Professional tips
            tips.push('üìä Add specific metrics and achievements (increased sales by 25%, managed team of 10)');
            tips.push('üí™ Use strong action verbs: achieved, optimized, delivered, exceeded');
            tips.push('üéØ Customize your resume for each job application');
            tips.push('üìã Ensure clear sections: Summary, Experience, Skills, Education');
            
            if (result.overallScore >= 70) {
                tips.push('üîç Review job description multiple times to catch subtle requirements');
                tips.push('üé™ Use synonyms for key skills to avoid keyword stuffing');
            }
            
            return tips.slice(0, 12);
        }

        function displayResults(result) {
            updateScoreCircle(result.overallScore);
            
            document.getElementById('foundKeywords').textContent = result.foundKeywords;
            document.getElementById('missingKeywords').textContent = result.missingKeywords;
            document.getElementById('matchPercentage').textContent = result.overallScore + '%';
            
            // Animate progress bars
            setTimeout(() => updateProgressBar('hardSkillsProgress', 'hardSkillsPercent', result.hardSkillsPercent), 300);
            setTimeout(() => updateProgressBar('softSkillsProgress', 'softSkillsPercent', result.softSkillsPercent), 600);
            setTimeout(() => updateProgressBar('keywordsProgress', 'keywordsPercent', result.keywordsPercent), 900);
            
            updateTabContent(result);
        }

        function updateScoreCircle(score) {
            const circle = document.getElementById('scoreCircle');
            const scoreText = document.getElementById('scoreText');
            
            const degree = (score / 100) * 360;
            let color = '#e74c3c';
            if (score >= 80) color = '#27ae60';
            else if (score >= 60) color = '#f39c12';
            else if (score >= 40) color = '#e67e22';
            
            circle.style.background = `conic-gradient(${color} ${degree}deg, #e0e0e0 ${degree}deg)`;
            scoreText.textContent = score + '%';
        }

        function updateProgressBar(progressId, percentId, value) {
            const progressBar = document.getElementById(progressId);
            const percentLabel = document.getElementById(percentId);
            
            progressBar.style.width = value + '%';
            percentLabel.textContent = value + '%';
            
            // Color coding
            if (value >= 80) progressBar.style.background = 'linear-gradient(90deg, #27ae60, #2ecc71)';
            else if (value >= 60) progressBar.style.background = 'linear-gradient(90deg, #f39c12, #f1c40f)';
            else if (value >= 40) progressBar.style.background = 'linear-gradient(90deg, #e67e22, #f39c12)';
            else progressBar.style.background = 'linear-gradient(90deg, #e74c3c, #c0392b)';
        }

        function updateTabContent(result) {
            // Summary tab
            const scoreClass = result.overallScore >= 70 ? 'alert-success' : 
                              result.overallScore >= 50 ? 'alert-warning' : 'alert-danger';
            
            const scoreMessage = result.overallScore >= 70 ? 'Excellent - Will pass ATS screening' :
                                result.overallScore >= 50 ? 'Good - Needs minor improvements' : 
                                'Poor - Requires major revisions';

            document.getElementById('summary').innerHTML = `
                <h3>üìã Comprehensive Analysis Summary</h3>
                <div class="alert-box ${scoreClass}">
                    <h4>Overall Score: ${result.overallScore}% - ${scoreMessage}</h4>
                </div>
                
                <div style="display: grid; grid-template-columns: 1fr 1fr; gap: 15px; margin: 20px 0;">
                    <div style="background: #f8f9fa; padding: 15px; border-radius: 8px;">
                        <strong>Keywords Match:</strong><br>
                        ${result.keywordsPercent}% (${result.foundKeywords}/${result.foundKeywords + result.missingKeywords} found)
                    </div>
                    <div style="background: #f8f9fa; padding: 15px; border-radius: 8px;">
                        <strong>Technical Skills:</strong><br>
                        ${result.hardSkillsPercent}% (${result.hardSkillsFound.length}/${result.hardSkillsFound.length + result.hardSkillsMissing.length} matched)
                    </div>
                    <div style="background: #f8f9fa; padding: 15px; border-radius: 8px;">
                        <strong>Soft Skills:</strong><br>
                        ${result.softSkillsPercent}% (${result.softSkillsFound.length}/${result.softSkillsFound.length + result.softSkillsMissing.length} matched)
                    </div>
                    <div style="background: #f8f9fa; padding: 15px; border-radius: 8px;">
                        <strong>Resume Quality:</strong><br>
                        ${result.qualityScore || 0}% (Structure & Content)
                    </div>
                </div>
                
                ${result.criticalIssues && result.criticalIssues.length > 0 ? 
                    `<div class="alert-box alert-danger">
                        <h4>üö® Critical Issues Identified:</h4>
                        ${result.criticalIssues.map(issue => `<p style="margin: 6px 0;">‚Ä¢ ${issue}</p>`).join('')}
                    </div>` : ''
                }
                
                <p style="font-size: 14px; color: #666; margin-top: 20px; padding: 10px; background: #f8f9fa; border-radius: 6px;">
                    üí° <strong>Professional ATS Analysis:</strong> This analysis uses algorithms similar to major ATS systems 
                    used by Fortune 500 companies and recruiting platforms.
                </p>
            `;

            // Hard Skills tab
            document.getElementById('hardSkillsContent').innerHTML = `
                <div style="margin-bottom: 20px;">
                    <h4 style="color: #27ae60;">‚úÖ Technical Skills Found (${result.hardSkillsFound.length})</h4>
                    <div style="margin: 10px 0;">
                        ${result.hardSkillsFound.length > 0 ? 
                            result.hardSkillsFound.map(skill => `<span class="skill-item found">${skill}</span>`).join('') :
                            '<p style="color: #666; font-style: italic;">No matching technical skills found</p>'
                        }
                    </div>
                </div>
                
                <div>
                    <h4 style="color: #e74c3c;">‚ùå Technical Skills Missing (${result.hardSkillsMissing.length})</h4>
                    <div style="margin: 10px 0;">
                        ${result.hardSkillsMissing.length > 0 ? 
                            result.hardSkillsMissing.map(skill => `<span class="skill-item missing">${skill}</span>`).join('') :
                            '<p style="color: #27ae60; font-style: italic;">All required technical skills are present!</p>'
                        }
                    </div>
                </div>
                
                ${result.hardSkillsMissing.length > 0 ? 
                    `<div class="alert-box alert-warning" style="margin-top: 15px;">
                        <strong>üí° Recommendation:</strong> Consider adding the missing skills if you have experience with them, 
                        or prioritize learning the most critical ones for this role.
                    </div>` : ''
                }
            `;

            // Soft Skills tab
            document.getElementById('softSkillsContent').innerHTML = `
                <div style="margin-bottom: 20px;">
                    <h4 style="color: #27ae60;">‚úÖ Soft Skills Found (${result.softSkillsFound.length})</h4>
                    <div style="margin: 10px 0;">
                        ${result.softSkillsFound.length > 0 ? 
                            result.softSkillsFound.map(skill => `<span class="skill-item found">${skill}</span>`).join('') :
                            '<p style="color: #666; font-style: italic;">No matching soft skills found</p>'
                        }
                    </div>
                </div>
                
                <div>
                    <h4 style="color: #e74c3c;">‚ùå Soft Skills Missing (${result.softSkillsMissing.length})</h4>
                    <div style="margin: 10px 0;">
                        ${result.softSkillsMissing.length > 0 ? 
                            result.softSkillsMissing.map(skill => `<span class="skill-item missing">${skill}</span>`).join('') :
                            '<p style="color: #27ae60; font-style: italic;">All required soft skills are demonstrated!</p>'
                        }
                    </div>
                </div>
                
                ${result.softSkillsMissing.length > 0 ? 
                    `<div class="alert-box alert-warning" style="margin-top: 15px;">
                        <strong>üí° Recommendation:</strong> Add specific examples that demonstrate these soft skills 
                        in your work experience descriptions.
                    </div>` : ''
                }
            `;

            // Keywords tab
            document.getElementById('keywordsContent').innerHTML = `
                <div style="margin-bottom: 20px;">
                    <h4 style="color: #27ae60;">‚úÖ Critical Keywords Found (${result.keywordMatches.length})</h4>
                    <div style="max-height: 200px; overflow-y: auto; margin: 10px 0; padding: 10px; background: #f8f9fa; border-radius: 6px;">
                        ${result.keywordMatches.length > 0 ? 
                            result.keywordMatches.slice(0, 100).map(keyword => `<span class="skill-item found">${keyword}</span>`).join('') :
                            '<p style="color: #666; font-style: italic;">No critical keywords found</p>'
                        }
                    </div>
                </div>
                
                <div>
                    <h4 style="color: #e74c3c;">‚ùå Critical Keywords Missing (${result.keywordsMissing.length})</h4>
                    <div style="max-height: 200px; overflow-y: auto; margin: 10px 0; padding: 10px; background: #f8f9fa; border-radius: 6px;">
                        ${result.keywordsMissing.length > 0 ? 
                            result.keywordsMissing.slice(0, 100).map(keyword => `<span class="skill-item missing">${keyword}</span>`).join('') :
                            '<p style="color: #27ae60; font-style: italic;">All critical keywords are present!</p>'
                        }
                    </div>
                </div>
                
                <div class="alert-box alert-warning" style="margin-top: 15px;">
                    <strong>üéØ Pro Tip:</strong> Use the exact keywords from the job description. 
                    ATS systems look for precise matches, so "data analysis" and "data analytics" might be treated differently.
                </div>
            `;

            // Tips tab
            const tips = generateTips(result);
            document.getElementById('tipsList').innerHTML = tips.map((tip, index) => 
                `<li><strong>${index + 1}.</strong> ${tip}</li>`
            ).join('');
        }

        function showTab(tabName) {
            // Hide all tabs
            document.querySelectorAll('.tab-content').forEach(tab => {
                tab.classList.remove('active');
            });
            
            // Remove active class from buttons
            document.querySelectorAll('.tab-btn').forEach(btn => {
                btn.classList.remove('active');
            });
            
            // Show selected tab
            document.getElementById(tabName).classList.add('active');
            
            // Add active class to clicked button
            event.target.classList.add('active');
        }

        // Initialize application
        document.addEventListener('DOMContentLoaded', function() {
            // Add focus effects to textareas
            const textareas = document.querySelectorAll('textarea');
            textareas.forEach(textarea => {
                textarea.addEventListener('focus', function() {
                    this.style.borderColor = '#667eea';
                    this.style.boxShadow = '0 0 10px rgba(102, 126, 234, 0.3)';
                });
                
                textarea.addEventListener('blur', function() {
                    this.style.borderColor = '#e1e5e9';
                    this.style.boxShadow = 'none';
                });
            });
        });
    </script>
</body>
</html>
